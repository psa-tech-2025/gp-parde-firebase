<div class="container my-5" *ngIf="isAdmin">

  <h3 class="text-danger mb-4">Home Content Admin</h3>

  <!-- NOTICE BOARD -->
  <div class="card p-3 mb-4">
    <h5>Notice Board</h5>

    <div class="d-flex mb-2">
      <input class="form-control me-2"
             [(ngModel)]="newNotice"
             placeholder="Add notice">
      <button class="btn btn-primary" (click)="addNotice()">Add</button>
    </div>

    <div *ngFor="let n of notices" class="d-flex mb-2">
      <input class="form-control me-2"
             [(ngModel)]="n.text">
      <button class="btn btn-success me-1"
              (click)="updateNotice(n.id, n.text)">Update</button>
      <button class="btn btn-danger"
              (click)="deleteNotice(n.id)">Delete</button>
    </div>
  </div>

  <!-- ANNOUNCEMENTS -->
  <div class="card p-3">
    <h5>Announcements</h5>

    <div class="d-flex mb-2">
      <input class="form-control me-2"
             [(ngModel)]="newAnnouncement"
             placeholder="Add announcement">
      <button class="btn btn-primary" (click)="addAnnouncement()">Add</button>
    </div>

    <div *ngFor="let a of announcements" class="d-flex mb-2">
      <input class="form-control me-2"
             [(ngModel)]="a.text">
      <button class="btn btn-success me-1"
              (click)="updateAnnouncement(a.id, a.text)">Update</button>
      <button class="btn btn-danger"
              (click)="deleteAnnouncement(a.id)">Delete</button>
    </div>
  </div>

</div>
<div class="container py-4">

  <h5 class="mb-3">Home Intro – Admin</h5>

  <!-- FORM -->
  <form [formGroup]="form" (ngSubmit)="submit()" class="card p-3 mb-4">
    <div class="row g-3">

      <div class="col-md-4">
        <input class="form-control" placeholder="Name" formControlName="nameText">
      </div>

      <div class="col-md-4">
        <input class="form-control" placeholder="Post" formControlName="postText">
      </div>

      <div class="col-md-4">
        <input class="form-control" placeholder="Intro Text" formControlName="introText">
      </div>

      <div class="col-md-12">
        <input type="file" multiple class="form-control" (change)="onFileChange($event)">
      </div>

      <div class="col-md-12 text-end">
        <button
  class="btn btn-primary"
  type="submit"
  [disabled]="isProcessing"
>
  {{ isProcessing ? 'Please wait...' : (editId ? 'Update' : 'Add') }}
</button>

      </div>

    </div>
  </form>

  <!-- TABLE -->
  <table class="table table-bordered align-middle">
    <thead class="table-light">
      <tr>
        <th>Images</th>
        <th>Name</th>
        <th>Post</th>
        <th>Intro</th>
        <th width="150">Actions</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let i of list">
        <td>
          <img
  *ngIf="i.images?.length"
  [src]="i.images[0]"
  width="40"
  class="rounded"
/>

        </td>
        <td>{{ i.nameText }}</td>
        <td>{{ i.postText }}</td>
        <td>{{ i.introText }}</td>
        <td>
          <button class="btn btn-sm btn-warning me-1" (click)="edit(i)">Edit</button>
          <button class="btn btn-sm btn-danger" (click)="delete(i.id)">Delete</button>
        </td>
      </tr>
    </tbody>
  </table>

</div>

<!-- GOOGLE MAP ADMIN -->
<!-- GOOGLE MAP FORM -->
<div class="card p-3 mb-4">
  <h5 class="mb-3">Home – Google Map</h5>

  <form [formGroup]="mapForm" (ngSubmit)="submitMap()">
    <div class="row g-3">

      <div class="col-md-4">
        <input class="form-control" placeholder="Title" formControlName="title">
      </div>

      <div class="col-md-4">
        <input class="form-control" placeholder="Address" formControlName="address">
      </div>

      <div class="col-md-12">
        <input class="form-control mb-2"
               placeholder="Google Map Embed URL"
               formControlName="mapEmbedUrl">

        <input class="form-control"
               placeholder="Google Map Open Link"
               formControlName="mapLink">
      </div>

      <div class="col-md-12 text-end">
        <button class="btn btn-primary">
          {{ editMapId ? 'Update Map' : 'Add Map' }}
        </button>
      </div>

    </div>
  </form>
</div>

<!-- MAP TABLE -->
<div class="table-responsive">
  <table class="table table-bordered align-middle">
    <thead class="table-light">
      <tr>
        <th>Title</th>
        <th>Address</th>
        <th>Preview</th>
        <th width="160">Action</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let m of maps">
        <td>{{ m.title }}</td>
        <td>{{ m.address }}</td>
        <td width="300">
          <iframe
            [src]="m.mapEmbedUrl | safeUrl"
            width="100%"
            height="150"
            style="border:0;"
            loading="lazy">
          </iframe>
        </td>
        <td>
          <button class="btn btn-sm btn-warning me-1" (click)="editMap(m)">
            Edit
          </button>
          <button class="btn btn-sm btn-danger" (click)="deleteMap(m.id)">
            Delete
          </button>
        </td>
      </tr>
    </tbody>
  </table>
</div>





